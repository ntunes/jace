llm:
  provider: anthropic          # or "openai"
  model: claude-sonnet-4-20250514
  api_key: ${ANTHROPIC_API_KEY}  # env var reference
  # system_prompt: "You are a custom network assistant..."  # override default persona
  # log_file: ~/.jace/llm.log   # log all LLM requests/responses
  # log_format: text             # "text" (default) or "jsonl"
  # For OpenAI-compatible:
  # provider: openai
  # base_url: http://localhost:11434/v1  # e.g., Ollama
  # api_key: ${OPENAI_API_KEY}
  # model: gpt-4o

ssh_config: ~/.ssh/config            # global SSH config (default: ~/.ssh/config)

# Option A: inline device list (simple setups)
devices:
  - name: mx-core-01
    host: 10.0.0.1
    username: admin
    password: ${DEVICE_PASSWORD}   # or use ssh_key
    ssh_key: ~/.ssh/id_rsa
    driver: auto                   # auto | pyez | netmiko
    port: 22                       # SSH port (used in ProxyCommand %p expansion)
    platform: junos
    # ssh_config: ~/.ssh/config_lab  # per-device override
    # timeout: 60                    # RPC/command timeout in seconds (default: 30)

# Option B: external inventory file with categories and shared credentials
# (mutually exclusive with 'devices:' above â€” use one or the other)
# inventory: inventory.yaml        # path relative to this config file

schedule:
  chassis:    300
  interfaces: 120
  routing:    180
  system:     300
  config:     86400  # once per day

api:
  enabled: false       # set to true for JACE MCP server (jace-mcp) support
  host: 127.0.0.1
  port: 8080

storage:
  path: ~/.jace/            # findings DB, state, logs

metrics:
  retention_days: 30
  anomaly_z_threshold: 3.0
  anomaly_window_hours: 24
  anomaly_min_samples: 10

heartbeat:
  enabled: false
  interval: 1800        # seconds (default: 30 min)
  file: heartbeat.md    # path to instructions file

memory:
  enabled: true
  max_file_size: 8000    # max chars per memory file
  max_total_size: 24000  # max chars injected into system prompt

correlation:
  enabled: true
  window_seconds: 30.0    # batch anomalies per device over this window

# mcp_servers:
#   - name: weather
#     command: npx
#     args: ["-y", "@modelcontextprotocol/server-weather"]
#   - name: remote-tools
#     transport: streamable-http
#     url: https://api.example.com/mcp
#     headers:
#       Authorization: "Bearer ${API_TOKEN}"

blocked_commands:
  - "request *"
  - "clear *"
  - "set *"
  - "delete *"
  - "activate *"
  - "deactivate *"

# allowed_commands:           # when set, only matching commands are permitted
#   - "show *"
#   - "ping *"
#   - "traceroute *"
